<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Prepare Packages for Parallel Processing with Future — load_packages_future • ecokit</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Prepare Packages for Parallel Processing with Future — load_packages_future"><meta name="description" content="Prepares a list of packages for use in parallel processing with the future
package, determining whether to load packages in the main process or pass
them to parallel workers based on the specified future strategy. This
function is designed to minimize package-loading messages in SLURM
environments, especially for multicore."><meta property="og:description" content="Prepares a list of packages for use in parallel processing with the future
package, determining whether to load packages in the main process or pass
them to parallel workers based on the specified future strategy. This
function is designed to minimize package-loading messages in SLURM
environments, especially for multicore."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ecokit</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html"><span class="fa fa-file-code-o"></span> Functions</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/elgabbas/ecokit/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Prepare Packages for Parallel Processing with Future</h1>
      <small class="dont-index">Source: <a href="https://github.com/elgabbas/ecokit/blob/main/R/general_load_packages_future.R" class="external-link"><code>R/general_load_packages_future.R</code></a></small>
      <div class="d-none name"><code>load_packages_future.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Prepares a list of packages for use in parallel processing with the <code>future</code>
package, determining whether to load packages in the main process or pass
them to parallel workers based on the specified <code>future</code> strategy. This
function is designed to minimize package-loading messages in SLURM
environments, especially for <code>multicore</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">load_packages_future</span><span class="op">(</span>packages <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="op">)</span>, strategy <span class="op">=</span> <span class="st">"multisession"</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-packages">packages<a class="anchor" aria-label="anchor" href="#arg-packages"></a></dt>
<dd><p>Character vector of package names to load, or <code>NULL</code> to
indicate no packages are needed (returns <code>NULL</code>).</p></dd>


<dt id="arg-strategy">strategy<a class="anchor" aria-label="anchor" href="#arg-strategy"></a></dt>
<dd><p>Character. The parallel processing strategy to use. Valid
options are "sequential", "multisession" (default), "multicore", and
"cluster". See <code><a href="https://future.futureverse.org/reference/plan.html" class="external-link">future::plan()</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A value depending on <code>strategy</code>:</p><ul><li><p><code>sequential</code>: <code>NULL</code> (no workers; packages not loaded).</p></li>
<li><p><code>multicore</code> (non-Windows): <code>NULL</code> (packages loaded in the main process,
inherited by forks).</p></li>
<li><p><code>multicore</code> (Windows), <code>multisession</code>, or
<code>cluster</code>: <code>packages</code> (character vector of package names to load in
workers, e.g., via <code>future.packages</code>).</p></li>
<li><p>If <code>packages</code> is <code>NULL</code>: <code>NULL</code> (no packages to load).</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function helps manage package loading for parallel processing
with the <code>future</code> package. It ensures efficient package handling and
minimizes package-loading messages in SLURM environments, particularly for
<code>multicore</code> on non-Windows systems, where packages are loaded in the main
process to avoid redundant messages in worker forks. For <code>multisession</code>,
<code>cluster</code>, or <code>multicore</code> on Windows (where <code>multicore</code> falls back to
<code>multisession</code>), it returns the package names for loading in workers,
typically via the <code>future.packages</code> argument in functions like
<code><a href="https://future.apply.futureverse.org/reference/future_lapply.html" class="external-link">future.apply::future_lapply()</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Ahmed El-Gabbas</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="op">(</span><span class="va">pkg_init</span> <span class="op">&lt;-</span> <span class="fu"><a href="loaded_packages.html">loaded_packages</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "tidyterra" "tidyr"     "qs2"       "arrow"     "car"       "carData"  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] "rworldmap" "raster"    "sp"        "purrr"     "terra"     "fs"       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [13] "tibble"    "png"       "sf"        "ggplot2"   "dplyr"     "ecokit"   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [19] "magrittr"  "stats"     "graphics"  "grDevices" "utils"     "datasets" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [25] "methods"   "base"     </span>
<span class="r-in"><span><span class="va">pkg_to_load</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"tidyterra"</span>, <span class="st">"lubridate"</span>, <span class="st">"tidyr"</span>, <span class="st">"sf"</span>, <span class="st">"scales"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># sequential</span></span></span>
<span class="r-in"><span><span class="fu">load_packages_future</span><span class="op">(</span><span class="va">pkg_to_load</span>, <span class="st">"sequential"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NULL</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/sets.html" class="external-link">setdiff</a></span><span class="op">(</span><span class="fu"><a href="loaded_packages.html">loaded_packages</a></span><span class="op">(</span><span class="op">)</span>, <span class="va">pkg_init</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> character(0)</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># multisession</span></span></span>
<span class="r-in"><span><span class="fu">load_packages_future</span><span class="op">(</span><span class="va">pkg_to_load</span>, <span class="st">"multisession"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "tidyterra" "lubridate" "tidyr"     "sf"        "scales"   </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/sets.html" class="external-link">setdiff</a></span><span class="op">(</span><span class="fu"><a href="loaded_packages.html">loaded_packages</a></span><span class="op">(</span><span class="op">)</span>, <span class="va">pkg_init</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> character(0)</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># multicore</span></span></span>
<span class="r-in"><span><span class="fu">load_packages_future</span><span class="op">(</span><span class="va">pkg_to_load</span>, <span class="st">"multicore"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NULL</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/sets.html" class="external-link">setdiff</a></span><span class="op">(</span><span class="fu"><a href="loaded_packages.html">loaded_packages</a></span><span class="op">(</span><span class="op">)</span>, <span class="va">pkg_init</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "scales"    "lubridate"</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://elgabbas.netlify.app/" class="external-link">Ahmed El-Gabbas</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

